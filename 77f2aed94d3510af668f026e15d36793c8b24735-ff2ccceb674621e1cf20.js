(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{BZIa:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return u}));var i=n("a3TU"),r=Math.PI/2;function a(t,e){var n=e.viewport,i=n.metersPerPixel,a=t.header.mbs[1],s=t.header.mbs[0],c=t.header.mbs[2],h=t.header.mbs[3],l=n.height,f=n.width,d=n.latitude,p=n.longitude,m=[p,d],v=[s,a,c],y=[p,a],g=[s,d],b=Math.sqrt(l*l+f*f)*i[0],_=.5*l+h/6378137,O=.5*f+h/6378137;if(o(m,v)>b+h/6378137)return"OUT";if(o(m,y)>_)return"OUT";if(o(m,g)>O)return"OUT";if(0===t.lodMetricValue)return"DIG";var w=u(t,e);return(w*=r)<.5?"OUT":!t.header.children||w<=t.lodMetricValue?"DRAW":t.header.children?"DIG":"OUT"}function s(t){var e=t[0],n=t[1],r=t[2],a=Object(i.j)(e),s=Object(i.j)(n),o=1+r/6378137,u=o*Math.cos(s);return[e=u*Math.cos(a),n=u*Math.sin(a),r=o*Math.sin(s)]}function o(t,e){var n=t[0],i=t[1],r=t[2],a=void 0===r?0:r,o=e[0],u=e[1],c=e[2],h=s([o,u,void 0===c?0:c]),l=s([n,i,a]),f=l[0]-h[0],d=l[1]-h[1],p=l[2]-h[2];return f*f+d*d+p*p}function u(t,e){var n=e.viewport,i=t.header.mbs[1],r=[t.header.mbs[0],i,t.header.mbs[2]],a=t.header.mbs[3]/6378137,s=o(n.unprojectPosition(n.cameraPosition),r)-a*a;if(s<=0)return 170141175e30;var u=function(t,e){var n=e.viewport,i=n.width,r=n.height,a=n.pixelProjectionMatrix,s=Math.tan(Math.atan(Math.sqrt(1/(a[0]*a[0])+1/(a[5]*a[5]))));return Math.sqrt(r*r+i*i)/s}(0,e);return u*=a/Math.sqrt(s)/n.scale}},"FJ6+":function(t,e,n){"use strict";n.d(e,"d",(function(){return i})),n.d(e,"e",(function(){return r})),n.d(e,"f",(function(){return a})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return u}));var i={UNLOADED:0,LOADING:1,PROCESSING:2,READY:3,EXPIRED:4,FAILED:5},r={ADD:1,REPLACE:2},a={EMPTY:"empty",SCENEGRAPH:"scenegraph",POINTCLOUD:"pointcloud",MESH:"mesh"},s={I3S:"I3S",TILES3D:"TILES3D"},o={GEOMETRIC_ERROR:"geometricError",MAX_SCREEN_THRESHOLD:"maxScreenThreshold"},u={NOT_COMPUTED:-1,USE_OPTIMIZATION:1,SKIP_OPTIMIZATION:0}},Fqdk:function(t,e,n){"use strict";n.d(e,"a",(function(){return Z}));var i=n("o0o1"),r=n.n(i),a=(n("wcNg"),n("HaE+")),s=n("rePB"),o=n("vuIU"),u=n("Nw31"),c=n("zXfU"),h=n("Ns70"),l=n("G+eI"),f=n("Qk7e"),d=n("VnMh"),p=n("wBSN"),m=function(t,e,n){this.item=t,this.previous=e,this.next=n},v=function(){function t(){this.head=null,this.tail=null,this._length=0}var e=t.prototype;return e.add=function(t){var e=new m(t,this.tail,null);return this.tail?(this.tail.next=e,this.tail=e):(this.head=e,this.tail=e),++this._length,e},e.remove=function(t){t&&(t.previous&&t.next?(t.previous.next=t.next,t.next.previous=t.previous):t.previous?(t.previous.next=null,this.tail=t.previous):t.next?(t.next.previous=null,this.head=t.next):(this.head=null,this.tail=null),t.next=null,t.previous=null,--this._length)},e.splice=function(t,e){t!==e&&(this.remove(e),this._insert(t,e))},e._insert=function(t,e){var n=t.next;t.next=e,this.tail===t?this.tail=e:n.previous=e,e.next=n,e.previous=t,++this._length},Object(o.a)(t,[{key:"length",get:function(){return this._length}}]),t}();function y(t){return null!=t}var g=function(){function t(){this._list=new v,this._sentinel=this._list.add("sentinel"),this._trimTiles=!1}var e=t.prototype;return e.reset=function(){this._list.splice(this._list.tail,this._sentinel)},e.touch=function(t){var e=t._cacheNode;y(e)&&this._list.splice(this._sentinel,e)},e.add=function(t,e,n){y(e._cacheNode)||(e._cacheNode=this._list.add(e),n&&n(t,e))},e.unloadTile=function(t,e,n){var i=e._cacheNode;y(i)&&(this._list.remove(i),e._cacheNode=void 0,n&&n(t,e))},e.unloadTiles=function(t,e){var n=this._trimTiles;this._trimTiles=!1;for(var i=this._list,r=1024*t.maximumMemoryUsage*1024,a=this._sentinel,s=i.head;s!==a&&(t.gpuMemoryUsageInBytes>r||n);){var o=s.item;s=s.next,this.unloadTile(t,o,e)}},e.trim=function(){this._trimTiles=!0},t}();var b=n("rOwd"),_=new c.a,O=new c.a,w=new b.b([new b.d,new b.d,new b.d,new b.d,new b.d,new b.d]);function T(t,e){var n=t.cameraDirection,i=t.cameraUp,r=t.height,a=t.distanceScales.metersPerUnit,s=[t.longitude,t.latitude,0],o=h.a.WGS84.cartographicToCartesian(s,new c.a),u=h.a.WGS84.eastNorthUpToFixedFrame(o),l=t.unprojectPosition(t.cameraPosition),f=h.a.WGS84.cartographicToCartesian(l,new c.a),d=new c.a(u.transformAsVector(new c.a(n).scale(a))).normalize(),p=new c.a(u.transformAsVector(new c.a(i).scale(a))).normalize();return function(t,e){var n=t.getFrustumPlanes(),i=0;for(var r in n){var a=n[r],s=a.normal.dot(t.center);O.copy(a.normal).scale(a.distance-s).add(t.center);var o=t.unprojectPosition(O),u=h.a.WGS84.cartographicToCartesian(o,new c.a);w.planes[i++].fromPointNormal(u,_.copy(e).subtract(u))}}(t,o),{camera:{position:f,direction:d,up:p},viewport:t,height:r,cullingVolume:w,frameNumber:e,sseDenominator:1.15}}var S=new c.a;function E(t){var e=t.halfAxes,n=t.radius,i=t.width,r=t.height;if(e){var a=function(t){t.getColumn(0,S);var e=t.getColumn(1),n=t.getColumn(2);return S.add(e).add(n).len()}(e);return Math.log2(6356752.314245179/a)}return n?Math.log2(6356752.314245179/n):r&&i?(Math.log2(6378137/i)+Math.log2(6378137/r))/2:1}var j=n("fa8B"),M=n("dI71"),x=n("FJ6+"),P=n("vrw9"),I=function(t){function e(){return t.apply(this,arguments)||this}Object(M.a)(e,t);var n=e.prototype;return n.compareDistanceToCamera=function(t,e){return 0===e._distanceToCamera&&0===t._distanceToCamera?e._centerZDepth-t._centerZDepth:e._distanceToCamera-t._distanceToCamera},n.updateTileVisibility=function(e,n){if(t.prototype.updateTileVisibility.call(this,e,n),e.isVisibleAndInRequestVolume){var i=e.children.length>0;if(e.hasTilesetContent&&i){var r=e.children[0];return this.updateTileVisibility(r,n),void(e._visible=r._visible)}if(this.meetsScreenSpaceErrorEarly(e,n))e._visible=!1;else{var a=e.refine===x.e.REPLACE,s=e._optimChildrenWithinParent===x.b.USE_OPTIMIZATION;a&&s&&i&&!this.anyChildrenVisible(e,n)&&(e._visible=!1)}}},n.meetsScreenSpaceErrorEarly=function(t,e){var n=t.parent;return!(!n||n.hasTilesetContent||n.refine!==x.e.ADD)&&!this.shouldRefine(t,e,!0)},e}(P.a),k=n("24Wh"),C=n("BZIa"),N="REQUESTED",R="COMPLETED",A="ERROR",D=function(){function t(){this._statusMap={}}var e=t.prototype;return e.add=function(t,e,n,i){var r=this;this._statusMap[e]||(this._statusMap[e]={request:t,callback:n,key:e,frameState:i,status:N},t().then((function(t){r._statusMap[e].status=R,r._statusMap[e].callback(t,i)})).catch((function(t){r._statusMap[e].status=A,n(t)})))},e.update=function(t,e){this._statusMap[t]&&(this._statusMap[t].frameState=e)},e.find=function(t){return this._statusMap[t]},t}();function q(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function V(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?q(Object(n),!0).forEach((function(e){Object(s.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function z(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return U(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return U(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=t[Symbol.iterator]()).next.bind(n)}function U(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var L=function(t){function e(e){var n;return(n=t.call(this,e)||this)._tileManager=new D,n}Object(M.a)(e,t);var n=e.prototype;return n.shouldRefine=function(t,e){return t._lodJudge=Object(C.b)(t,e),"DIG"===t._lodJudge},n.updateChildTiles=function(t,e){for(var n,i=this,r=t.header.children||[],a=t.children,s=t.tileset,o=function(){var r=n.value,o=r.id+"-"+e.viewport.id,u=a&&a.find((function(t){return t.id===o}));if(u)u&&i.updateTile(u,e);else{var c=function(){return i._loadTile(r.id,s)};i._tileManager.find(o)?i._tileManager.update(o,e):(s.tileset.nodePages&&(c=function(){return s.tileset.nodePagesTile.formTileFromNodePages(r.id)}),i._tileManager.add(c,o,(function(e){return i._onTileLoad(e,t,o)}),e))}},u=z(r);!(n=u()).done;)o();return!1},n._loadTile=function(){var t=Object(a.a)(r.a.mark((function t(e,n){var i,a,s;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=n.loader,a=n.getTileUrl(n.url+"/nodes/"+e),s={i3s:V(V({},n.fetchOptions),{},{isTileHeader:!0,loadContent:!1})},t.next=5,Object(k.a)(a,i,s);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),n._onTileLoad=function(t,e,n){var i=this.options.basePath,r=new j.a(e.tileset,t,e,i,n);e.children.push(r);var a=this._tileManager.find(r.id).frameState;this.updateTile(r,a),this._frameNumber===a.frameNumber&&this.executeTraversal(r,a)},e}(P.a);function F(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return B(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return B(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=t[Symbol.iterator]()).next.bind(n)}function B(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function G(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function W(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?G(Object(n),!0).forEach((function(e){Object(s.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var X={description:"",ellipsoid:h.a.WGS84,modelMatrix:new u.a,throttleRequests:!1,maximumMemoryUsage:32,onTileLoad:function(t){},onTileUnload:function(t){},onTileError:function(t,e,n){},maximumScreenSpaceError:8,loadTiles:!0,viewportTraversersMap:null,headers:{},fetchOptions:{},token:"",attributions:[],basePath:"",i3s:{}},Z=function(){function t(t,e){Object(f.a)(t),this.options=W(W({},X),e),this.tileset=t,this.loader=t.loader,this.type=t.type,this.url=t.url,this.basePath=t.basePath||d.a.dirname(this.url),this.modelMatrix=this.options.modelMatrix,this.ellipsoid=this.options.ellipsoid,this.lodMetricType=t.lodMetricType,this.lodMetricValue=t.lodMetricValue,this.refine=t.root.refine,this.fetchOptions=this.options.fetchOptions||{},this.options.headers&&(this.fetchOptions.headers=this.options.headers),this.options.token&&(this.fetchOptions.token=this.options.token),this.root=null,this.roots={},this.cartographicCenter=null,this.cartesianCenter=null,this.zoom=1,this.boundingVolume=null,this.traverseCounter=0,this.geometricError=0,this._traverser=this._initializeTraverser(),this._cache=new g,this._requestScheduler=new p.a({throttleRequests:this.options.throttleRequests}),this._frameNumber=0,this._pendingCount=0,this._tiles={},this.selectedTiles=[],this._emptyTiles=[],this._requestedTiles=[],this.frameStateData={},this.lastUpdatedVieports=null,this._queryParams={},this._queryParamsString="",this.maximumMemoryUsage=this.options.maximumMemoryUsage||32,this.gpuMemoryUsageInBytes=0,this.stats=new l.a({id:this.url}),this._initializeStats(),this._hasMixedContent=!1,this._maximumScreenSpaceError=this.options.maximumScreenSpaceError,this._properties=void 0,this._extensionsUsed=void 0,this._gltfUpAxis=void 0,this._dynamicScreenSpaceErrorComputedDensity=0,this.extras=null,this.asset={},this.credits={},this.description=this.options.description||"",this._defaultGeometrySchema=[],this._initializeTileSet(t)}var e=t.prototype;return e.destroy=function(){this._destroy()},e.isLoaded=function(){return 0===this._pendingCount&&0!==this._frameNumber},e.setProps=function(t){this.options=W(W({},this.options),t)},e.setOptions=function(t){this.options=W(W({},this.options),t)},e.getTileUrl=function(t){return t.startsWith("data:")?t:""+t+this.queryParams},e.hasExtension=function(t){return Boolean(this._extensionsUsed&&this._extensionsUsed.indexOf(t)>-1)},e.update=function(t){if((!("loadTiles"in this.options)||this.options.loadTiles)&&!(this.traverseCounter>0)){!t&&this.lastUpdatedVieports?t=this.lastUpdatedVieports:this.lastUpdatedVieports=t,t instanceof Array||(t=[t]),this._cache.reset(),this._frameNumber++,this.traverseCounter=t.length;for(var e,n=[],i=F(t);!(e=i()).done;){var r=e.value.id;this._needTraverse(r)?n.push(r):this.traverseCounter--}for(var a,s=F(t);!(a=s()).done;){var o=a.value,u=o.id;if(this.roots[u]||(this.roots[u]=this._initializeTileHeaders(this.tileset,null,this.basePath)),n.includes(u)){var c=T(o,this._frameNumber);this._traverser.traverse(this.roots[u],c,this.options)}}}},e._needTraverse=function(t){var e=t;return this.options.viewportTraversersMap&&(e=this.options.viewportTraversersMap[t]),e===t},e._onTraversalEnd=function(t){var e=t.viewport.id;this.frameStateData[e]||(this.frameStateData[e]={selectedTiles:[],_requestedTiles:[],_emptyTiles:[]});var n=this.frameStateData[e],i=Object.values(this._traverser.selectedTiles);n.selectedTiles=i,n._requestedTiles=Object.values(this._traverser.requestedTiles),n._emptyTiles=Object.values(this._traverser.emptyTiles),this.traverseCounter--,this.traverseCounter>0||this._updateTiles()},e._updateTiles=function(){for(var t in this.selectedTiles=[],this._requestedTiles=[],this._emptyTiles=[],this.frameStateData){var e=this.frameStateData[t];this.selectedTiles=this.selectedTiles.concat(e.selectedTiles),this._requestedTiles=this._requestedTiles.concat(e._requestedTiles),this._emptyTiles=this._emptyTiles.concat(e._emptyTiles)}for(var n,i=F(this.selectedTiles);!(n=i()).done;){var r=n.value;this._tiles[r.id]=r}this._loadTiles(),this._unloadTiles(),this._updateStats()},e._tilesChanged=function(t,e){if(t.length!==e.length)return!0;var n=new Set(t.map((function(t){return t.id}))),i=new Set(e.map((function(t){return t.id}))),r=t.filter((function(t){return!i.has(t.id)})).length>0;return r=r||e.filter((function(t){return!n.has(t.id)})).length>0},e._loadTiles=function(){for(var t,e=F(this._requestedTiles);!(t=e()).done;){var n=t.value;n.contentUnloaded&&this._loadTile(n)}},e._unloadTiles=function(){this._cache.unloadTiles(this,(function(t,e){return t._unloadTile(e)}))},e._updateStats=function(){for(var t,e=0,n=0,i=F(this.selectedTiles);!(t=i()).done;){var r=t.value;r.contentAvailable&&(e++,r.content.pointCount&&(n+=r.content.pointCount))}this.stats.get("Tiles In View").count=this.selectedTiles.length,this.stats.get("Tiles To Render").count=e,this.stats.get("Points").count=n},e._initializeTileSet=function(t){this.root=this._initializeTileHeaders(t,null,this.basePath),this.type===x.c.TILES3D&&this._initializeCesiumTileset(t),this.type===x.c.I3S&&this._initializeI3STileset(t),this._calculateViewProps()},e._calculateViewProps=function(){var t=this.root;Object(f.a)(t);var e=t.boundingVolume.center;if(!e)return console.warn("center was not pre-calculated for the root tile"),this.cartographicCenter=new c.a,void(this.zoom=1);this.cartographicCenter=h.a.WGS84.cartesianToCartographic(e,new c.a),this.cartesianCenter=e,this.zoom=E(t.boundingVolume)},e._initializeStats=function(){this.stats.get("Tiles In Tileset(s)"),this.stats.get("Tiles Loading"),this.stats.get("Tiles In Memory"),this.stats.get("Tiles In View"),this.stats.get("Tiles To Render"),this.stats.get("Tiles Loaded"),this.stats.get("Tiles Unloaded"),this.stats.get("Failed Tile Loads"),this.stats.get("Points","memory"),this.stats.get("Tile Memory Use","memory")},e._initializeTileHeaders=function(t,e,n){var i=new j.a(this,t.root,e,n);if(e&&(e.children.push(i),i.depth=e.depth+1),this.type===x.c.TILES3D){var r=[];for(r.push(i);r.length>0;){var a=r.pop();this.stats.get("Tiles In Tileset(s)").incrementCount();for(var s,o=F(a.header.children||[]);!(s=o()).done;){var u=s.value,c=new j.a(this,u,a,n);a.children.push(c),c.depth=a.depth+1,r.push(c)}}}return i},e._initializeTraverser=function(){var t;switch(this.type){case x.c.TILES3D:t=I;break;case x.c.I3S:t=L;break;default:t=P.a}return new t({basePath:this.basePath,onTraversalEnd:this._onTraversalEnd.bind(this)})},e._destroyTileHeaders=function(t){this._destroySubtree(t)},e._loadTile=function(){var t=Object(a.a)(r.a.mark((function t(e){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,this._onStartTileLoading(),t.next=4,e.loadContent();case 4:n=t.sent,t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),this._onTileLoadError(e,t.t0);case 10:return t.prev=10,this._onEndTileLoading(),this._onTileLoad(e,n),t.finish(10);case 14:case"end":return t.stop()}}),t,this,[[0,7,10,14]])})));return function(e){return t.apply(this,arguments)}}(),e._onTileLoadError=function(t,e){this.stats.get("Failed Tile Loads").incrementCount();var n=e.message||e.toString(),i=t.url;console.error("A 3D tile failed to load: "+t.url+" "+n),this.options.onTileError(t,n,i)},e._onTileLoad=function(t,e){e&&(t&&t.content&&function(t,e){Object(f.a)(t),Object(f.a)(e);var n=e.rtcCenter,i=e.gltfUpAxis,r=t.computedTransform,a=t.boundingVolume.center,s=new u.a(r);switch(n&&s.translate(n),i){case"Z":break;case"Y":var o=(new u.a).rotateX(Math.PI/2);s=s.multiplyRight(o);break;case"X":var l=(new u.a).rotateY(-Math.PI/2);s=s.multiplyRight(l)}e.isQuantized&&s.translate(e.quantizedVolumeOffset).scale(e.quantizedVolumeScale);var d=new c.a(a);e.cartesianModelMatrix=s,e.cartesianOrigin=d;var p=h.a.WGS84.cartesianToCartographic(d,new c.a),m=h.a.WGS84.eastNorthUpToFixedFrame(d).invert();e.cartographicModelMatrix=m.multiplyRight(s),e.cartographicOrigin=p,e.modelMatrix=e.cartographicModelMatrix}(t,t.content),this._addTileToCache(t),this.options.onTileLoad(t))},e._onStartTileLoading=function(){this._pendingCount++,this.stats.get("Tiles Loading").incrementCount()},e._onEndTileLoading=function(){this._pendingCount--,this.stats.get("Tiles Loading").decrementCount()},e._addTileToCache=function(t){this._cache.add(this,t,(function(e){return e._updateCacheStats(t)}))},e._updateCacheStats=function(t){this.stats.get("Tiles Loaded").incrementCount(),this.stats.get("Tiles In Memory").incrementCount(),this.gpuMemoryUsageInBytes+=t.content.byteLength||0,this.stats.get("Tile Memory Use").count=this.gpuMemoryUsageInBytes},e._unloadTile=function(t){this.gpuMemoryUsageInBytes-=t.content.byteLength||0,this.stats.get("Tiles In Memory").decrementCount(),this.stats.get("Tiles Unloaded").incrementCount(),this.stats.get("Tile Memory Use").count=this.gpuMemoryUsageInBytes,this.options.onTileUnload(t),t.unloadContent()},e._destroy=function(){var t=[];for(this.root&&t.push(this.root);t.length>0;){for(var e,n=t.pop(),i=F(n.children);!(e=i()).done;){var r=e.value;t.push(r)}this._destroyTile(n)}this.root=null},e._destroySubtree=function(t){var e=t,n=[];for(n.push(e);n.length>0;){for(var i,r=F((t=n.pop()).children);!(i=r()).done;){var a=i.value;n.push(a)}t!==e&&this._destroyTile(t)}e.children=[]},e._destroyTile=function(t){this._cache.unloadTile(this,t),this._unloadTile(t),t.destroy()},e._initializeCesiumTileset=function(t){if(this.asset=t.asset,!this.asset)throw new Error("Tileset must have an asset property.");if("0.0"!==this.asset.version&&"1.0"!==this.asset.version)throw new Error("The tileset must be 3D Tiles version 0.0 or 1.0.");"tilesetVersion"in this.asset&&(this._queryParams.v=this.asset.tilesetVersion),this.credits={attributions:this.options.attributions||[]},this.description=this.options.description||"",this.properties=t.properties,this.geometricError=t.geometricError,this._extensionsUsed=t.extensionsUsed,this.extras=t.extras},e._initializeI3STileset=function(t){"token"in this.options&&(this._queryParams.token=this.options.token),this._defaultGeometrySchema=t.store.defaultGeometrySchema},Object(o.a)(t,[{key:"tiles",get:function(){return Object.values(this._tiles)}},{key:"frameNumber",get:function(){return this._frameNumber}},{key:"queryParams",get:function(){return this._queryParamsString||(this._queryParamsString=function(t){for(var e=[],n=0,i=Object.keys(t);n<i.length;n++){var r=i[n];e.push(r+"="+t[r])}switch(e.length){case 0:return"";case 1:return"?"+e[0];default:return"?"+e.join("&")}}(this._queryParams)),this._queryParamsString}}]),t}()},"G+eI":function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var i=n("1OyB"),r=n("vuIU"),a=n("OyGM"),s=function(){function t(e,n){Object(i.a)(this,t),this.name=e,this.type=n,this.sampleSize=1,this.reset()}return Object(r.a)(t,[{key:"setSampleSize",value:function(t){return this.sampleSize=t,this}},{key:"incrementCount",value:function(){return this.addCount(1),this}},{key:"decrementCount",value:function(){return this.subtractCount(1),this}},{key:"addCount",value:function(t){return this._count+=t,this._samples++,this._checkSampling(),this}},{key:"subtractCount",value:function(t){return this._count-=t,this._samples++,this._checkSampling(),this}},{key:"addTime",value:function(t){return this._time+=t,this.lastTiming=t,this._samples++,this._checkSampling(),this}},{key:"timeStart",value:function(){return this._startTime=Object(a.a)(),this._timerPending=!0,this}},{key:"timeEnd",value:function(){return this._timerPending?(this.addTime(Object(a.a)()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}},{key:"getSampleAverageCount",value:function(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}},{key:"getSampleAverageTime",value:function(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}},{key:"getSampleHz",value:function(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}},{key:"getAverageCount",value:function(){return this.samples>0?this.count/this.samples:0}},{key:"getAverageTime",value:function(){return this.samples>0?this.time/this.samples:0}},{key:"getHz",value:function(){return this.time>0?this.samples/(this.time/1e3):0}},{key:"reset",value:function(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}},{key:"_checkSampling",value:function(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}]),t}(),o=function(){function t(e){var n=e.id,r=e.stats;Object(i.a)(this,t),this.id=n,this.stats={},this._initializeStats(r),Object.seal(this)}return Object(r.a)(t,[{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"count";return this._getOrCreate({name:t,type:e})}},{key:"reset",value:function(){for(var t in this.stats)this.stats[t].reset();return this}},{key:"forEach",value:function(t){for(var e in this.stats)t(this.stats[e])}},{key:"getTable",value:function(){var t={};return this.forEach((function(e){t[e.name]={time:e.time||0,count:e.count||0,average:e.getAverageTime()||0,hz:e.getHz()||0}})),t}},{key:"_initializeStats",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e.forEach((function(e){return t._getOrCreate(e)}))}},{key:"_getOrCreate",value:function(t){if(!t||!t.name)return null;var e=t.name,n=t.type;return this.stats[e]||(this.stats[e]=t instanceof s?t:new s(e,n)),this.stats[e]}},{key:"size",get:function(){return Object.keys(this.stats).length}}]),t}()},GA6j:function(t,e,n){"use strict";n.d(e,"a",(function(){return b}));var i=n("1OyB"),r=n("vuIU"),a=n("Ji7U"),s=n("md7G"),o=n("foSv"),u=n("fxzv"),c=n("+H0l"),h=n("sSh/"),l=n("HwUG"),f=n("ZxFD"),d=n("n+fv");function p(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Object(o.a)(t);if(e){var r=Object(o.a)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Object(s.a)(this,n)}}var m=Object.freeze([1,0,0,0,1,0,0,0,1]),v=Object.freeze([0,0,0,0,0,0,0,0,0]),y=Object.freeze({COL0ROW0:0,COL0ROW1:1,COL0ROW2:2,COL1ROW0:3,COL1ROW1:4,COL1ROW2:5,COL2ROW0:6,COL2ROW1:7,COL2ROW2:8}),g={},b=function(t){Object(a.a)(n,t);var e=p(n);function n(t){var r;return Object(i.a)(this,n),r=e.call(this,-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(t)?r.copy(t):r.identity(),r}return Object(r.a)(n,[{key:"ELEMENTS",get:function(){return 9}},{key:"RANK",get:function(){return 3}},{key:"INDICES",get:function(){return y}}],[{key:"IDENTITY",get:function(){return g.IDENTITY=g.IDENTITY||Object.freeze(new n(m)),g.IDENTITY}},{key:"ZERO",get:function(){return g.ZERO=g.ZERO||Object.freeze(new n(v)),g.ZERO}}]),Object(r.a)(n,[{key:"copy",value:function(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this.check()}},{key:"set",value:function(t,e,n,i,r,a,s,o,u){return this[0]=t,this[1]=e,this[2]=n,this[3]=i,this[4]=r,this[5]=a,this[6]=s,this[7]=o,this[8]=u,this.check()}},{key:"setRowMajor",value:function(t,e,n,i,r,a,s,o,u){return this[0]=t,this[1]=i,this[2]=s,this[3]=e,this[4]=r,this[5]=o,this[6]=n,this[7]=a,this[8]=u,this.check()}},{key:"determinant",value:function(){return l.b(this)}},{key:"identity",value:function(){return this.copy(m)}},{key:"fromQuaternion",value:function(t){return l.c(this,t),this.check()}},{key:"transpose",value:function(){return l.i(this,this),this.check()}},{key:"invert",value:function(){return l.d(this,this),this.check()}},{key:"multiplyLeft",value:function(t){return l.e(this,t,this),this.check()}},{key:"multiplyRight",value:function(t){return l.e(this,this,t),this.check()}},{key:"rotate",value:function(t){return l.f(this,this,t),this.check()}},{key:"scale",value:function(t){return Array.isArray(t)?l.g(this,this,t):l.g(this,this,[t,t,t]),this.check()}},{key:"translate",value:function(t){return l.h(this,this,t),this.check()}},{key:"transform",value:function(t,e){switch(t.length){case 2:e=f.i(e||[-0,-0],t,this);break;case 3:e=d.n(e||[-0,-0,-0],t,this);break;case 4:e=Object(h.d)(e||[-0,-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return Object(c.b)(e,t.length),e}},{key:"transformVector",value:function(t,e){return Object(c.c)("Matrix3.transformVector"),this.transform(t,e)}},{key:"transformVector2",value:function(t,e){return Object(c.c)("Matrix3.transformVector"),this.transform(t,e)}},{key:"transformVector3",value:function(t,e){return Object(c.c)("Matrix3.transformVector"),this.transform(t,e)}}]),n}(u.a)},Ns70:function(t,e,n){"use strict";n.d(e,"a",(function(){return D}));var i=n("ODXe"),r=n("1OyB"),a=n("vuIU"),s=n("zXfU"),o=n("tS8E"),u=n("gOKY"),c=n("Nw31"),h=n("a3TU"),l=n("n+fv"),f=(Math.max(6378137,6378137,6356752.314245179),function(t){return t}),d=new s.a;function p(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f;return Object(h.f)(t)?(e[0]=n(t[0]),e[1]=n(t[1]),e[2]=t[2]):"longitude"in t?(e[0]=n(t.longitude),e[1]=n(t.latitude),e[2]=t.height):(e[0]=n(t.x),e[1]=n(t.y),e[2]=t.z),e}function m(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d;return p(t,e,h.b._cartographicRadians?f:h.j)}function v(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f;return Object(h.f)(e)?(e[0]=n(t[0]),e[1]=n(t[1]),e[2]=t[2]):"longitude"in e?(e.longitude=n(t[0]),e.latitude=n(t[1]),e.height=t[2]):(e.x=n(t[0]),e.y=n(t[1]),e.z=t[2]),e}function y(t,e){return v(t,e,h.b._cartographicRadians?f:h.i)}var g=new s.a,b=new s.a,_=new s.a;var O=new s.a,w={up:{south:"east",north:"west",west:"south",east:"north"},down:{south:"west",north:"east",west:"north",east:"south"},south:{up:"west",down:"east",west:"down",east:"up"},north:{up:"east",down:"west",west:"up",east:"down"},west:{up:"north",down:"south",north:"down",south:"up"},east:{up:"south",down:"north",north:"up",south:"down"}},T={north:[-1,0,0],east:[0,1,0],up:[0,0,1],south:[1,0,0],west:[0,-1,0],down:[0,0,-1]},S={east:new s.a,north:new s.a,up:new s.a,west:new s.a,south:new s.a,down:new s.a},E=new s.a,j=new s.a,M=new s.a;function x(t,e,n,i,r,a){var s,u,c,l=w[e]&&w[e][n];Object(o.a)(l&&(!i||i===l));var f=O.copy(r);if(Object(h.d)(f.x,0,1e-14)&&Object(h.d)(f.y,0,1e-14)){var d=Math.sign(f.z);s=E.fromArray(T[e]),"east"!==e&&"west"!==e&&s.scale(d),u=j.fromArray(T[n]),"east"!==n&&"west"!==n&&u.scale(d),c=M.fromArray(T[i]),"east"!==i&&"west"!==i&&c.scale(d)}else{var p=S.up,m=S.east,v=S.north;m.set(-f.y,f.x,0).normalize(),t.geodeticSurfaceNormal(f,p),v.copy(p).cross(m);var y=S.west,g=S.south;S.down.copy(p).scale(-1),y.copy(m).scale(-1),g.copy(v).scale(-1),s=S[e],u=S[n],c=S[i]}return a[0]=s.x,a[1]=s.y,a[2]=s.z,a[3]=0,a[4]=u.x,a[5]=u.y,a[6]=u.z,a[7]=0,a[8]=c.x,a[9]=c.y,a[10]=c.z,a[11]=0,a[12]=f.x,a[13]=f.y,a[14]=f.z,a[15]=1,a}var P,I=new s.a,k=new s.a,C=new s.a,N=new s.a,R=new s.a,A=new s.a,D=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;Object(r.a)(this,t),Object(o.a)(e>=0),Object(o.a)(n>=0),Object(o.a)(i>=0),this.radii=new s.a(e,n,i),this.radiiSquared=new s.a(e*e,n*n,i*i),this.radiiToTheFourth=new s.a(e*e*e*e,n*n*n*n,i*i*i*i),this.oneOverRadii=new s.a(0===e?0:1/e,0===n?0:1/n,0===i?0:1/i),this.oneOverRadiiSquared=new s.a(0===e?0:1/(e*e),0===n?0:1/(n*n),0===i?0:1/(i*i)),this.minimumRadius=Math.min(e,n,i),this.maximumRadius=Math.max(e,n,i),this.centerToleranceSquared=u.a.EPSILON1,0!==this.radiiSquared.z&&(this.squaredXOverSquaredZ=this.radiiSquared.x/this.radiiSquared.z),Object.freeze(this)}return Object(a.a)(t,null,[{key:"WGS84",get:function(){return P=P||new t(6378137,6378137,6356752.314245179)}}]),Object(a.a)(t,[{key:"equals",value:function(t){return this===t||Boolean(t&&this.radii.equals(t.radii))}},{key:"toString",value:function(){return this.radii.toString()}},{key:"cartographicToCartesian",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0],n=k,r=C,a=Object(i.a)(t,3),s=a[2];this.geodeticSurfaceNormalCartographic(t,n),r.copy(this.radiiSquared).scale(n);var o=Math.sqrt(n.dot(r));return r.scale(1/o),n.scale(s),r.add(n),r.to(e)}},{key:"cartesianToCartographic",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];A.from(t);var n=this.scaleToGeodeticSurface(A,N);if(n){var i=this.geodeticSurfaceNormal(n,k),r=R;r.copy(A).subtract(n);var a=Math.atan2(i.y,i.x),s=Math.asin(i.z),o=Math.sign(l.d(r,A))*l.g(r);return y([a,s,o],e)}}},{key:"eastNorthUpToFixedFrame",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new c.a;return x(this,"east","north","up",t,e)}},{key:"localFrameToFixedFrame",value:function(t,e,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new c.a;return x(this,t,e,n,i,r)}},{key:"geocentricSurfaceNormal",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];return I.from(t).normalize().to(e)}},{key:"geodeticSurfaceNormalCartographic",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0],n=m(t),i=n[0],r=n[1],a=Math.cos(r);return I.set(a*Math.cos(i),a*Math.sin(i),Math.sin(r)).normalize(),I.to(e)}},{key:"geodeticSurfaceNormal",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];return I.from(t).scale(this.oneOverRadiiSquared).normalize().to(e)}},{key:"scaleToGeodeticSurface",value:function(t,e){return function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new s.a,i=e.oneOverRadii,r=e.oneOverRadiiSquared,a=e.centerToleranceSquared;g.from(t);var o=t.x,c=t.y,h=t.z,l=i.x,f=i.y,d=i.z,p=o*o*l*l,m=c*c*f*f,v=h*h*d*d,y=p+m+v,O=Math.sqrt(1/y);if(Number.isFinite(O)){var w=b;if(w.copy(t).scale(O),y<a)return w.to(n);var T=r.x,S=r.y,E=r.z,j=_;j.set(w.x*T*2,w.y*S*2,w.z*E*2);var M,x,P,I,k=(1-O)*t.len()/(.5*j.len()),C=0;do{var N=(M=1/(1+(k-=C)*T))*M,R=(x=1/(1+k*S))*x,A=(P=1/(1+k*E))*P,D=N*M,q=R*x,V=A*P,z=p*D*T+m*q*S+v*V*E,U=-2*z;C=(I=p*N+m*R+v*A-1)/U}while(Math.abs(I)>u.a.EPSILON12);return g.scale([M,x,P]).to(n)}}(t,this,e)}},{key:"scaleToGeocentricSurface",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];N.from(t);var n=N.x,i=N.y,r=N.z,a=this.oneOverRadiiSquared,s=1/Math.sqrt(n*n*a.x+i*i*a.y+r*r*a.z);return N.multiplyScalar(s).to(e)}},{key:"transformPositionToScaledSpace",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];return N.from(t).scale(this.oneOverRadii).to(e)}},{key:"transformPositionFromScaledSpace",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];return N.from(t).scale(this.radii).to(e)}},{key:"getSurfaceNormalIntersectionWithZAxis",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0,0];Object(o.a)(Object(h.d)(this.radii.x,this.radii.y,u.a.EPSILON15)),Object(o.a)(this.radii.z>0),N.from(t);var i=N.z*(1-this.squaredXOverSquaredZ);if(!(Math.abs(i)>=this.radii.z-e))return N.set(0,0,i).to(n)}}]),t}()},OyGM:function(t,e,n){"use strict";(function(t){function i(){var e;if("undefined"!=typeof window&&window.performance)e=window.performance.now();else if(void 0!==t&&t.hrtime){var n=t.hrtime();e=1e3*n[0]+n[1]/1e6}else e=Date.now();return e}n.d(e,"a",(function(){return i}))}).call(this,n("8oxB"))},VnMh:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var i={};function r(t){var e=t&&t.lastIndexOf("/");return e>=0?t.substr(0,e):""}function a(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i="/";return(e=e.map((function(t,n){return n&&(t=t.replace(new RegExp("^"+i),"")),n!==e.length-1&&(t=t.replace(new RegExp(i+"$"),"")),t}))).join(i)}n.r(i),n.d(i,"dirname",(function(){return r})),n.d(i,"join",(function(){return a}))},fa8B:function(t,e,n){"use strict";n.d(e,"a",(function(){return C}));var i=n("o0o1"),r=n.n(i),a=n("rePB"),s=(n("wcNg"),n("HaE+")),o=n("vuIU"),u=n("zXfU"),c=n("Nw31"),h=n("rOwd"),l=n("24Wh"),f=n("VnMh"),d=n("FJ6+"),p=n("KQm4"),m=n("a3TU"),v=n("Xjzu"),y=n("GA6j"),g=n("Ns70"),b=n("Qk7e");function _(t){return null!=t}var O=new u.a,w=new u.a,T=new u.a;new c.a;function S(t,e,n){if(Object(b.a)(t,"3D Tile: boundingVolume must be defined"),t.box)return function(t,e,n){var i=new u.a(t[0],t[1],t[2]);e.transform(i,i);var r=[];if(10===t.length){var a=t.slice(3,6),s=new v.a;s.fromArray(t,6);var o=new u.a([1,0,0]),c=new u.a([0,1,0]),l=new u.a([0,0,1]);o.transformByQuaternion(s),o.scale(a[0]),c.transformByQuaternion(s),c.scale(a[1]),l.transformByQuaternion(s),l.scale(a[2]),r=[].concat(Object(p.a)(o.toArray()),Object(p.a)(c.toArray()),Object(p.a)(l.toArray()))}else r=[].concat(Object(p.a)(t.slice(3,6)),Object(p.a)(t.slice(6,9)),Object(p.a)(t.slice(9,12)));var f=e.transformAsVector(r.slice(0,3)),d=e.transformAsVector(r.slice(3,6)),m=e.transformAsVector(r.slice(6,9)),g=new y.a([f[0],f[1],f[2],d[0],d[1],d[2],m[0],m[1],m[2]]);if(_(n))return n.center=i,n.halfAxes=g,n;return new h.c(i,g)}(t.box,e,n);if(t.region){var i=t.region,r=i[0],a=i[1],s=i[2],o=i[3],l=i[4],f=i[5],d=g.a.WGS84.cartographicToCartesian([Object(m.c)(r),Object(m.c)(o),l],w),O=g.a.WGS84.cartographicToCartesian([Object(m.c)(s),Object(m.c)(a),f],T),S=(new u.a).addVectors(d,O).multiplyScalar(.5),j=(new u.a).subVectors(d,O).len()/2;return E([S[0],S[1],S[2],j],new c.a)}if(t.sphere)return E(t.sphere,e,n);throw new Error("3D Tile: boundingVolume must contain a sphere, region, or box")}function E(t,e,n){var i=new u.a(t[0],t[1],t[2]);e.transform(i,i);var r=e.getScale(O),a=Math.max(Math.max(r[0],r[1]),r[2]),s=t[3]*a;return _(n)?(n.center=i,n.radius=s,n):new h.a(i,s)}new u.a,new u.a,new c.a,new u.a,new u.a,new u.a;function j(t,e){if(t.dynamicScreenSpaceError&&t._dynamicScreenSpaceErrorComputedDensity){var n=t._dynamicScreenSpaceErrorComputedDensity,i=t.dynamicScreenSpaceErrorFactor;return function(t,e){var n=t*e;return 1-Math.exp(-n*n)}(e,n)*i}return 0}var M=n("BZIa");var x=n("vrw9");function P(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function I(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?P(Object(n),!0).forEach((function(e){Object(a.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var k=new u.a;var C=function(){function t(t,e,n,i,r){void 0===r&&(r=""),this.header=e,this.tileset=t,this.id=r||e.id,this.url=e.url,this.parent=n,this.refine=this._getRefine(e.refine),this.type=e.type,this.contentUrl=e.contentUrl,this.lodMetricType="geometricError",this.lodMetricValue=0,this.boundingVolume=null,this.content=null,this.contentState=d.d.UNLOADED,this.gpuMemoryUsageInBytes=0,this.children=[],this.hasEmptyContent=!1,this.hasTilesetContent=!1,this.depth=0,this.viewportIds=[],this.userData={},this._priority=0,this._touchedFrame=0,this._visitedFrame=0,this._selectedFrame=0,this._requestedFrame=0,this._screenSpaceError=0,this._cacheNode=null,this._frameNumber=null,this._cacheNode=null,this.traverser=new x.a({}),this._shouldRefine=!1,this._distanceToCamera=0,this._centerZDepth=0,this._visible=!1,this._inRequestVolume=!1,this._stackLength=0,this._selectionDepth=0,this._initialTransform=new c.a,this.transform=new c.a,this._initializeLodMetric(e),this._initializeTransforms(e),this._initializeBoundingVolumes(e),this._initializeContent(e),this._initializeRenderingState(e),this._lodJudge=null,this._expireDate=null,this._expiredContent=null,Object.seal(this)}var e=t.prototype;return e.destroy=function(){this.header=null},e.isDestroyed=function(){return null===this.header},e.getScreenSpaceError=function(t,e){switch(this.tileset.type){case d.c.I3S:return Object(M.a)(this,t);case d.c.TILES3D:return function(t,e,n){var i=t.tileset,r=t.parent&&t.parent.lodMetricValue||t.lodMetricValue,a=n?r:t.lodMetricValue;if(0===a)return 0;var s=Math.max(t._distanceToCamera,1e-7),o=a*e.height/(s*e.sseDenominator);return o-=j(i,s)}(this,t,e);default:throw new Error("Unsupported tileset type")}},e.loadContent=function(){var t=Object(s.a)(r.a.mark((function t(){var e,n,i,a,s;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.hasEmptyContent){t.next=2;break}return t.abrupt("return",!1);case 2:if(!this.content){t.next=4;break}return t.abrupt("return",!0);case 4:return this.contentExpired&&(this._expireDate=null),this.contentState=d.d.LOADING,t.next=9,this.tileset._requestScheduler.scheduleRequest(this.id,this._getPriority.bind(this));case 9:if(e=t.sent){t.next=13;break}return this.contentState=d.d.UNLOADED,t.abrupt("return",!1);case 13:return t.prev=13,i=this.tileset.getTileUrl(this.contentUrl),a=this.tileset.loader,(n={fetch:this.tileset.fetchOptions})[a.id]=I({isTileset:"json"===this.type},this._getLoaderSpecificOptions(a.id)),s=n,t.next=19,Object(l.a)(i,a,s);case 19:return this.content=t.sent,this._isTileset()&&this.tileset._initializeTileHeaders(this.content,this,f.a.dirname(this.contentUrl)),this.contentState=d.d.READY,this._onContentLoaded(),t.abrupt("return",!0);case 26:throw t.prev=26,t.t0=t.catch(13),this.contentState=d.d.FAILED,t.t0;case 30:return t.prev=30,e.done(),t.finish(30);case 33:case"end":return t.stop()}}),t,this,[[13,26,30,33]])})));return function(){return t.apply(this,arguments)}}(),e.unloadContent=function(){return this.content&&this.content.destroy&&this.content.destroy(),this.content=null,this.header.content&&this.header.content.destroy&&this.header.content.destroy(),this.header.content=null,this.contentState=d.d.UNLOADED,!0},e.updateVisibility=function(t,e){if(this._frameNumber!==t.frameNumber){var n=this.parent,i=n?n.computedTransform:this.tileset.modelMatrix,r=n?n._visibilityPlaneMask:h.b.MASK_INDETERMINATE;this._updateTransform(i),this._distanceToCamera=this.distanceToTile(t),this._screenSpaceError=this.getScreenSpaceError(t,!1),this._visibilityPlaneMask=this.visibility(t,r),this._visible=this._visibilityPlaneMask!==h.b.MASK_OUTSIDE,this._inRequestVolume=this.insideViewerRequestVolume(t),this._priority=this.lodMetricValue,this._frameNumber=t.frameNumber,this.viewportIds=e}},e.visibility=function(t,e){var n=t.cullingVolume,i=this.boundingVolume;return n.computeVisibilityWithPlaneMask(i,e)},e.contentVisibility=function(t){return!0},e.distanceToTile=function(t){var e=this.boundingVolume;return Math.sqrt(Math.max(e.distanceSquaredTo(t.camera.position),0))},e.cameraSpaceZDepth=function(t){var e=t.camera,n=this.boundingVolume;return k.subVectors(n.center,e.position),e.direction.dot(k)},e.insideViewerRequestVolume=function(t){var e=this._viewerRequestVolume;return!e||0===e.distanceToCamera(t.camera.position)},e.updateExpiration=function(){if(null!=this._expireDate&&this.contentReady&&!this.hasEmptyContent){var t=Date.now();Date.lessThan(this._expireDate,t)&&(this.contentState=d.d.EXPIRED,this._expiredContent=this.content)}},e._initializeLodMetric=function(t){"lodMetricType"in t?this.lodMetricType=t.lodMetricType:(this.lodMetricType=this.parent&&this.parent.lodMetricType||this.tileset.lodMetricType,console.warn("3D Tile: Required prop lodMetricType is undefined. Using parent lodMetricType")),"lodMetricValue"in t?this.lodMetricValue=t.lodMetricValue:(this.lodMetricValue=this.parent&&this.parent.lodMetricValue||this.tileset.lodMetricValue,console.warn("3D Tile: Required prop lodMetricValue is undefined. Using parent lodMetricValue"))},e._initializeTransforms=function(t){this.transform=t.transform?new c.a(t.transform):new c.a;var e=this.parent,n=this.tileset,i=e&&e.computedTransform?e.computedTransform.clone():n.modelMatrix.clone();this.computedTransform=new c.a(i).multiplyRight(this.transform);var r=e&&e._initialTransform?e._initialTransform.clone():new c.a;this._initialTransform=new c.a(r).multiplyRight(this.transform)},e._initializeBoundingVolumes=function(t){this._contentBoundingVolume=null,this._viewerRequestVolume=null,this._updateBoundingVolume(t)},e._initializeContent=function(t){this.content={_tileset:this.tileset,_tile:this},this.hasEmptyContent=!0,this.contentState=d.d.UNLOADED,this.hasTilesetContent=!1,t.contentUrl&&(this.content=null,this.hasEmptyContent=!1)},e._initializeRenderingState=function(t){this.depth=t.level||(this.parent?this.parent.depth+1:0),this._shouldRefine=!1,this._distanceToCamera=0,this._centerZDepth=0,this._screenSpaceError=0,this._visibilityPlaneMask=h.b.MASK_INDETERMINATE,this._visible=!1,this._inRequestVolume=!1,this._stackLength=0,this._selectionDepth=0,this._frameNumber=0,this._touchedFrame=0,this._visitedFrame=0,this._selectedFrame=0,this._requestedFrame=0,this._priority=0},e._getPriority=function(){return this.isVisible?this.contentState===d.d.UNLOADED?-1:Math.max(1e7-this._priority,0)||0:-1},e._getRefine=function(t){return t||this.parent&&this.parent.refine||d.e.REPLACE},e._isTileset=function(){return-1!==this.contentUrl.indexOf(".json")},e._onContentLoaded=function(){switch(this.content&&this.content.type){case"vctr":case"geom":this.tileset._traverser.disableSkipLevelOfDetail=!0}this._isTileset()&&(this.hasTilesetContent=!0)},e._updateBoundingVolume=function(t){this.boundingVolume=S(t.boundingVolume,this.computedTransform,this.boundingVolume);var e=t.content;e&&(e.boundingVolume&&(this._contentBoundingVolume=S(e.boundingVolume,this.computedTransform,this._contentBoundingVolume)),t.viewerRequestVolume&&(this._viewerRequestVolume=S(t.viewerRequestVolume,this.computedTransform,this._viewerRequestVolume)))},e._updateTransform=function(t){void 0===t&&(t=new c.a);var e=t.clone().multiplyRight(this.transform);!e.equals(this.computedTransform)&&(this.computedTransform=e,this._updateBoundingVolume(this.header))},e._getLoaderSpecificOptions=function(t){switch(t){case"i3s":return I(I({},this.tileset.options.i3s),{},{tile:this.header,tileset:this.tileset.tileset,isTileHeader:!1});case"3d-tiles":case"cesium-ion":default:return{assetGltfUpAxis:(e=this.tileset.tileset).asset&&e.asset.gltfUpAxis||"Y"}}var e},Object(o.a)(t,[{key:"selected",get:function(){return this._selectedFrame===this.tileset._frameNumber}},{key:"isVisible",get:function(){return this._visible}},{key:"isVisibleAndInRequestVolume",get:function(){return this._visible&&this._inRequestVolume}},{key:"hasRenderContent",get:function(){return!this.hasEmptyContent&&!this.hasTilesetContent}},{key:"hasChildren",get:function(){return this.children.length>0||this.header.children&&this.header.children.length>0}},{key:"contentReady",get:function(){return this.contentState===d.d.READY||this.hasEmptyContent}},{key:"contentAvailable",get:function(){return Boolean(this.contentReady&&this.hasRenderContent||this._expiredContent&&!this.contentFailed)}},{key:"hasUnloadedContent",get:function(){return this.hasRenderContent&&this.contentUnloaded}},{key:"contentUnloaded",get:function(){return this.contentState===d.d.UNLOADED}},{key:"contentExpired",get:function(){return this.contentState===d.d.EXPIRED}},{key:"contentFailed",get:function(){return this.contentState===d.d.FAILED}},{key:"extras",get:function(){return this.header.extras}}]),t}()},gOKY:function(t,e,n){"use strict";e.a={EPSILON1:.1,EPSILON2:.01,EPSILON3:.001,EPSILON4:1e-4,EPSILON5:1e-5,EPSILON6:1e-6,EPSILON7:1e-7,EPSILON8:1e-8,EPSILON9:1e-9,EPSILON10:1e-10,EPSILON11:1e-11,EPSILON12:1e-12,EPSILON13:1e-13,EPSILON14:1e-14,EPSILON15:1e-15,EPSILON16:1e-16,EPSILON17:1e-17,EPSILON18:1e-18,EPSILON19:1e-19,EPSILON20:1e-20,PI_OVER_TWO:Math.PI/2,PI_OVER_FOUR:Math.PI/4,PI_OVER_SIX:Math.PI/6,TWO_PI:2*Math.PI}},rOwd:function(t,e,n){"use strict";n.d(e,"a",(function(){return f})),n.d(e,"c",(function(){return A})),n.d(e,"b",(function(){return X})),n.d(e,"d",(function(){return U})),n.d(e,"e",(function(){return Ot})),n.d(e,"f",(function(){return Bt}));var i=Object.freeze({OUTSIDE:-1,INTERSECTING:0,INSIDE:1}),r=n("1OyB"),a=n("vuIU"),s=n("zXfU"),o=new s.a,u=new s.a,c=(function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Object(r.a)(this,t),i=i||o.copy(e).add(n).scale(.5),this.center=new s.a(i),this.halfDiagonal=new s.a(n).subtract(this.center),this.minimum=new s.a(e),this.maximum=new s.a(n)}Object(a.a)(t,[{key:"clone",value:function(){return new t(this.minimum,this.maximum,this.center)}},{key:"equals",value:function(t){return this===t||Boolean(t)&&this.minimum.equals(t.minimum)&&this.maximum.equals(t.maximum)}},{key:"intersectPlane",value:function(t){var e=this.halfDiagonal,n=u.from(t.normal),r=e.x*Math.abs(n.x)+e.y*Math.abs(n.y)+e.z*Math.abs(n.z),a=this.center.dot(n)+t.distance;return a-r>0?i.INSIDE:a+r<0?i.OUTSIDE:i.INTERSECTING}},{key:"distanceTo",value:function(t){return Math.sqrt(this.distanceSquaredTo(t))}},{key:"distanceSquaredTo",value:function(t){var e,n=o.from(t).subtract(this.center),i=this.halfDiagonal,r=0;return(e=Math.abs(n.x)-i.x)>0&&(r+=e*e),(e=Math.abs(n.y)-i.y)>0&&(r+=e*e),(e=Math.abs(n.z)-i.z)>0&&(r+=e*e),r}}])}(),n("ZaHm")),h=new s.a,l=new s.a,f=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(r.a)(this,t),this.radius=-0,this.center=new s.a,this.fromCenterRadius(e,n)}return Object(a.a)(t,[{key:"fromCenterRadius",value:function(t,e){return this.center.from(t),this.radius=e,this}},{key:"fromCornerPoints",value:function(t,e){return e=h.from(e),this.center=(new s.a).from(t).add(e).scale(.5),this.radius=this.center.distance(e),this}},{key:"equals",value:function(t){return this===t||Boolean(t)&&this.center.equals(t.center)&&this.radius===t.radius}},{key:"clone",value:function(){return new t(this.center,this.radius)}},{key:"union",value:function(t){var e=this.center,n=this.radius,i=t.center,r=t.radius,a=h.copy(i).subtract(e),s=a.magnitude();if(n>=s+r)return this.clone();if(r>=s+n)return t.clone();var o=.5*(n+s+r);return l.copy(a).scale((-n+o)/s).add(e),this.center.copy(l),this.radius=o,this}},{key:"expand",value:function(t){var e=(t=h.from(t)).subtract(this.center).magnitude();return e>this.radius&&(this.radius=e),this}},{key:"intersectPlane",value:function(t){var e=this.center,n=this.radius,r=t.normal.dot(e)+t.distance;return r<-n?i.OUTSIDE:r<n?i.INTERSECTING:i.INSIDE}},{key:"transform",value:function(t){this.center.transform(t);var e=c.e(h,t);return this.radius=Math.max(e[0],Math.max(e[1],e[2]))*this.radius,this}},{key:"distanceSquaredTo",value:function(t){return(t=h.from(t)).subtract(this.center).lengthSquared()-this.radius*this.radius}},{key:"distanceTo",value:function(t){return Math.sqrt(this.distanceSquaredTo(t))}}]),t}(),d=n("KQm4"),p=n("GA6j"),m=n("Xjzu"),v=new s.a,y=new s.a,g=new s.a,b=new s.a,_=new s.a,O=new s.a,w=new s.a,T=new s.a,S=new s.a,E=new s.a,j=0,M=1,x=2,P=3,I=4,k=5,C=6,N=7,R=8,A=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0,0,0,0,0,0,0];Object(r.a)(this,t),this.center=(new s.a).from(e),this.halfAxes=new p.a(n)}return Object(a.a)(t,[{key:"fromCenterHalfSizeQuaternion",value:function(t,e,n){var i=new m.a(n),r=(new p.a).fromQuaternion(i);return r[0]=r[0]*e[0],r[1]=r[1]*e[0],r[2]=r[2]*e[0],r[3]=r[3]*e[1],r[4]=r[4]*e[1],r[5]=r[5]*e[1],r[6]=r[6]*e[2],r[7]=r[7]*e[2],r[8]=r[8]*e[2],this.center=(new s.a).from(t),this.halfAxes=r,this}},{key:"clone",value:function(){return new t(this.center,this.halfAxes)}},{key:"equals",value:function(t){return this===t||Boolean(t)&&this.center.equals(t.center)&&this.halfAxes.equals(t.halfAxes)}},{key:"getBoundingSphere",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new f,e=this.halfAxes,n=e.getColumn(0,T),i=e.getColumn(1,S),r=e.getColumn(2,E),a=v.copy(n).add(i).add(r);return t.center.copy(this.center),t.radius=a.magnitude(),t}},{key:"intersectPlane",value:function(t){var e=this.center,n=t.normal,r=this.halfAxes,a=n.x,s=n.y,o=n.z,u=Math.abs(a*r[j]+s*r[M]+o*r[x])+Math.abs(a*r[P]+s*r[I]+o*r[k])+Math.abs(a*r[C]+s*r[N]+o*r[R]),c=n.dot(e)+t.distance;return c<=-u?i.OUTSIDE:c>=u?i.INSIDE:i.INTERSECTING}},{key:"distanceTo",value:function(t){return Math.sqrt(this.distanceSquaredTo(t))}},{key:"distanceSquaredTo",value:function(t){var e=y.from(t).subtract(this.center),n=this.halfAxes,i=n.getColumn(0,g),r=n.getColumn(1,b),a=n.getColumn(2,_),s=i.magnitude(),o=r.magnitude(),u=a.magnitude();i.normalize(),r.normalize(),a.normalize();var c,h=0;return(c=Math.abs(e.dot(i))-s)>0&&(h+=c*c),(c=Math.abs(e.dot(r))-o)>0&&(h+=c*c),(c=Math.abs(e.dot(a))-u)>0&&(h+=c*c),h}},{key:"computePlaneDistances",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[-0,-0],i=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,a=this.center,s=this.halfAxes,o=s.getColumn(0,g),u=s.getColumn(1,b),c=s.getColumn(2,_),h=O.copy(o).add(u).add(c).add(a),l=w.copy(h).subtract(t),f=e.dot(l);return i=Math.min(f,i),r=Math.max(f,r),h.copy(a).add(o).add(u).subtract(c),l.copy(h).subtract(t),f=e.dot(l),i=Math.min(f,i),r=Math.max(f,r),h.copy(a).add(o).subtract(u).add(c),l.copy(h).subtract(t),f=e.dot(l),i=Math.min(f,i),r=Math.max(f,r),h.copy(a).add(o).subtract(u).subtract(c),l.copy(h).subtract(t),f=e.dot(l),i=Math.min(f,i),r=Math.max(f,r),a.copy(h).subtract(o).add(u).add(c),l.copy(h).subtract(t),f=e.dot(l),i=Math.min(f,i),r=Math.max(f,r),a.copy(h).subtract(o).add(u).subtract(c),l.copy(h).subtract(t),f=e.dot(l),i=Math.min(f,i),r=Math.max(f,r),a.copy(h).subtract(o).subtract(u).add(c),l.copy(h).subtract(t),f=e.dot(l),i=Math.min(f,i),r=Math.max(f,r),a.copy(h).subtract(o).subtract(u).subtract(c),l.copy(h).subtract(t),f=e.dot(l),i=Math.min(f,i),r=Math.max(f,r),n[0]=i,n[1]=r,n}},{key:"getTransform",value:function(){}},{key:"halfSize",get:function(){var t=this.halfAxes.getColumn(0),e=this.halfAxes.getColumn(1),n=this.halfAxes.getColumn(2);return[new s.a(t).len(),new s.a(e).len(),new s.a(n).len()]}},{key:"quaternion",get:function(){var t=this.halfAxes.getColumn(0),e=this.halfAxes.getColumn(1),n=this.halfAxes.getColumn(2),i=new s.a(t).normalize(),r=new s.a(e).normalize(),a=new s.a(n).normalize();return(new m.a).fromMatrix3(new p.a([].concat(Object(d.a)(i),Object(d.a)(r),Object(d.a)(a))))}}]),t}(),D=n("tS8E"),q=n("a3TU"),V=new s.a,z=new s.a,U=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,1],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(r.a)(this,t),this.normal=new s.a,this.distance=-0,this.fromNormalDistance(e,n)}return Object(a.a)(t,[{key:"fromNormalDistance",value:function(t,e){return Object(D.a)(Number.isFinite(e)),this.normal.from(t).normalize(),this.distance=e,this}},{key:"fromPointNormal",value:function(t,e){t=V.from(t),this.normal.from(e).normalize();var n=-this.normal.dot(t);return this.distance=n,this}},{key:"fromCoefficients",value:function(t,e,n,i){return this.normal.set(t,e,n),Object(D.a)(Object(q.d)(this.normal.len(),1)),this.distance=i,this}},{key:"clone",value:function(e){return new t(this.normal,this.distance)}},{key:"equals",value:function(t){return Object(q.d)(this.distance,t.distance)&&Object(q.d)(this.normal,t.normal)}},{key:"getPointDistance",value:function(t){return this.normal.dot(t)+this.distance}},{key:"transform",value:function(t){var e=z.copy(this.normal).transformAsVector(t).normalize(),n=this.normal.scale(-this.distance).transform(t);return this.fromPointNormal(n,e)}},{key:"projectPointOntoPlane",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0];t=V.from(t);var n=this.getPointDistance(t),i=z.copy(this.normal).scale(n);return t.subtract(i).to(e)}}]),t}();function L(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return F(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return F(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){o=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw a}}}}function F(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var B=[new s.a([1,0,0]),new s.a([0,1,0]),new s.a([0,0,1])],G=new s.a,W=new s.a,X=(new U(new s.a(1,0,0),0),function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Object(r.a)(this,t),this.planes=e,Object(D.a)(this.planes.every((function(t){return t instanceof U})))}return Object(a.a)(t,null,[{key:"MASK_OUTSIDE",get:function(){return 4294967295}},{key:"MASK_INSIDE",get:function(){return 0}},{key:"MASK_INDETERMINATE",get:function(){return 2147483647}}]),Object(a.a)(t,[{key:"fromBoundingSphere",value:function(t){this.planes.length=2*B.length;var e,n=t.center,i=t.radius,r=0,a=L(B);try{for(a.s();!(e=a.n()).done;){var s=e.value,o=this.planes[r],u=this.planes[r+1];o||(o=this.planes[r]=new U),u||(u=this.planes[r+1]=new U);var c=G.copy(s).scale(-i).add(n);s.dot(c);o.fromPointNormal(c,s);var h=G.copy(s).scale(i).add(n),l=W.copy(s).negate();l.dot(h);u.fromPointNormal(h,l),r+=2}}catch(f){a.e(f)}finally{a.f()}return this}},{key:"computeVisibility",value:function(t){Object(D.a)(t);var e,n=i.INSIDE,r=L(this.planes);try{for(r.s();!(e=r.n()).done;){var a=e.value;switch(t.intersectPlane(a)){case i.OUTSIDE:return i.OUTSIDE;case i.INTERSECTING:n=i.INTERSECTING}}}catch(s){r.e(s)}finally{r.f()}return n}},{key:"computeVisibilityWithPlaneMask",value:function(e,n){if(Object(D.a)(e,"boundingVolume is required."),Object(D.a)(Number.isFinite(n),"parentPlaneMask is required."),n===t.MASK_OUTSIDE||n===t.MASK_INSIDE)return n;for(var r=t.MASK_INSIDE,a=this.planes,s=0;s<this.planes.length;++s){var o=s<31?1<<s:0;if(!(s<31&&0==(n&o))){var u=a[s],c=e.intersectPlane(u);if(c===i.OUTSIDE)return t.MASK_OUTSIDE;c===i.INTERSECTING&&(r|=o)}}return r}}]),t}()),Z=n("rePB"),H=n("Nw31");function Q(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function K(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Q(Object(n),!0).forEach((function(e){Object(Z.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Y=new s.a,J=new s.a,$=new s.a,tt=new s.a,et=new s.a,nt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(r.a)(this,t),e=K({near:1,far:5e8},e),this.left=e.left,this._left=void 0,this.right=e.right,this._right=void 0,this.top=e.top,this._top=void 0,this.bottom=e.bottom,this._bottom=void 0,this.near=e.near,this._near=this.near,this.far=e.far,this._far=this.far,this._cullingVolume=new X([new U,new U,new U,new U,new U,new U]),this._perspectiveMatrix=new H.a,this._infinitePerspective=new H.a}return Object(a.a)(t,[{key:"clone",value:function(){return new t({right:this.right,left:this.left,top:this.top,bottom:this.bottom,near:this.near,far:this.far})}},{key:"equals",value:function(e){return e&&e instanceof t&&this.right===e.right&&this.left===e.left&&this.top===e.top&&this.bottom===e.bottom&&this.near===e.near&&this.far===e.far}},{key:"computeCullingVolume",value:function(t,e,n){Object(D.a)(t,"position is required."),Object(D.a)(e,"direction is required."),Object(D.a)(n,"up is required.");var i=this._cullingVolume.planes;n=Y.copy(n).normalize();var r=J.copy(e).cross(n).normalize(),a=$.copy(e).multiplyByScalar(this.near).add(t),o=tt.copy(e).multiplyByScalar(this.far).add(t),u=et;return u.copy(r).multiplyByScalar(this.left).add(a).subtract(t).cross(n),i[0].fromPointNormal(t,u),u.copy(r).multiplyByScalar(this.right).add(a).subtract(t).cross(n).negate(),i[1].fromPointNormal(t,u),u.copy(n).multiplyByScalar(this.bottom).add(a).subtract(t).cross(r).negate(),i[2].fromPointNormal(t,u),u.copy(n).multiplyByScalar(this.top).add(a).subtract(t).cross(r),i[3].fromPointNormal(t,u),u=(new s.a).copy(e),i[4].fromPointNormal(a,u),u.negate(),i[5].fromPointNormal(o,u),this._cullingVolume}},{key:"getPixelDimensions",value:function(t,e,n,i){it(this),Object(D.a)(Number.isFinite(t)&&Number.isFinite(e)),Object(D.a)(t>0),Object(D.a)(e>0),Object(D.a)(n>0),Object(D.a)(i);var r=1/this.near,a=this.top*r,s=2*n*a/e,o=2*n*(a=this.right*r)/t;return i.x=o,i.y=s,i}},{key:"projectionMatrix",get:function(){return it(this),this._perspectiveMatrix}},{key:"infiniteProjectionMatrix",get:function(){return it(this),this._infinitePerspective}}]),t}();function it(t){Object(D.a)(Number.isFinite(t.right)&&Number.isFinite(t.left)&&Number.isFinite(t.top)&&Number.isFinite(t.bottom)&&Number.isFinite(t.near)&&Number.isFinite(t.far));var e=t.top,n=t.bottom,i=t.right,r=t.left,a=t.near,s=t.far;e===t._top&&n===t._bottom&&r===t._left&&i===t._right&&a===t._near&&s===t._far||(Object(D.a)(t.near>0&&t.near<t.far,"near must be greater than zero and less than far."),t._left=r,t._right=i,t._top=e,t._bottom=n,t._near=a,t._far=s,t._perspectiveMatrix=(new H.a).frustum({left:r,right:i,bottom:n,top:e,near:a,far:s}),t._infinitePerspective=(new H.a).frustum({left:r,right:i,bottom:n,top:e,near:a,far:1/0}))}function rt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function at(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?rt(Object(n),!0).forEach((function(e){Object(Z.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}!function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(r.a)(this,t),e=at({near:1,far:5e8,xOffset:0,yOffset:0},e),this._offCenterFrustum=new nt,this.fov=e.fov,this._fov=void 0,this._fovy=void 0,this._sseDenominator=void 0,this.aspectRatio=e.aspectRatio,this._aspectRatio=void 0,this.near=e.near,this._near=this.near,this.far=e.far,this._far=this.far,this.xOffset=e.xOffset,this._xOffset=this.xOffset,this.yOffset=e.yOffset,this._yOffset=this.yOffset}Object(a.a)(t,[{key:"clone",value:function(){return new t({aspectRatio:this.aspectRatio,fov:this.fov,near:this.near,far:this.far})}},{key:"equals",value:function(e){return null!=e&&e instanceof t&&(st(this),st(e),this.fov===e.fov&&this.aspectRatio===e.aspectRatio&&this.near===e.near&&this.far===e.far&&this._offCenterFrustum.equals(e._offCenterFrustum))}},{key:"computeCullingVolume",value:function(t,e,n){return st(this),this._offCenterFrustum.computeCullingVolume(t,e,n)}},{key:"getPixelDimensions",value:function(t,e,n,i){return st(this),this._offCenterFrustum.getPixelDimensions(t,e,n,i)}},{key:"projectionMatrix",get:function(){return st(this),this._offCenterFrustum.projectionMatrix}},{key:"infiniteProjectionMatrix",get:function(){return st(this),this._offCenterFrustum.infiniteProjectionMatrix}},{key:"fovy",get:function(){return st(this),this._fovy}},{key:"sseDenominator",get:function(){return st(this),this._sseDenominator}}])}();function st(t){Object(D.a)(Number.isFinite(t.fov)&&Number.isFinite(t.aspectRatio)&&Number.isFinite(t.near)&&Number.isFinite(t.far));var e=t._offCenterFrustum;t.fov===t._fov&&t.aspectRatio===t._aspectRatio&&t.near===t._near&&t.far===t._far&&t.xOffset===t._xOffset&&t.yOffset===t._yOffset||(Object(D.a)(t.fov>=0&&t.fov<Math.PI),Object(D.a)(t.aspectRatio>0),Object(D.a)(t.near>=0&&t.near<t.far),t._aspectRatio=t.aspectRatio,t._fov=t.fov,t._fovy=t.aspectRatio<=1?t.fov:2*Math.atan(Math.tan(.5*t.fov)/t.aspectRatio),t._near=t.near,t._far=t.far,t._sseDenominator=2*Math.tan(.5*t._fovy),t._xOffset=t.xOffset,t._yOffset=t.yOffset,e.top=t.near*Math.tan(.5*t._fovy),e.bottom=-e.top,e.right=t.aspectRatio*e.top,e.left=-e.right,e.near=t.near,e.far=t.far,e.right+=t.xOffset,e.left+=t.xOffset,e.top+=t.yOffset,e.bottom+=t.yOffset)}function ot(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return ut(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ut(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){o=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw a}}}}function ut(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var ct=new s.a,ht=new s.a,lt=new s.a,ft=new s.a,dt=new s.a,pt=new s.a,mt=new s.a,vt=new s.a,yt=new s.a,gt=new s.a,bt=new s.a,_t=new s.a;Math.PI;function Ot(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new f;if(!t||0===t.length)return e.fromCenterRadius([0,0,0],0);var n,i=mt.copy(t[0]),r=ct.copy(i),a=ht.copy(i),s=lt.copy(i),o=ft.copy(i),u=dt.copy(i),c=pt.copy(i),h=ot(t);try{for(h.s();!(n=h.n()).done;){var l=n.value;i.copy(l);var d=i.x,p=i.y,m=i.z;d<r.x&&i.copy(r),d>o.x&&i.copy(o),p<a.y&&i.copy(a),p>u.y&&i.copy(u),m<s.z&&i.copy(s),m>c.z&&i.copy(c)}}catch(D){h.e(D)}finally{h.f()}var v=vt.copy(o).subtract(r).magnitudeSquared(),y=vt.copy(u).subtract(a).magnitudeSquared(),g=vt.copy(c).subtract(s).magnitudeSquared(),b=r,_=o,O=v;y>O&&(O=y,b=a,_=u),g>O&&(O=g,b=s,_=c);var w=yt;w.x=.5*(b.x+_.x),w.y=.5*(b.y+_.y),w.z=.5*(b.z+_.z);var T=vt.copy(_).subtract(w).magnitudeSquared(),S=Math.sqrt(T),E=gt;E.x=r.x,E.y=a.y,E.z=s.z;var j=bt;j.x=o.x,j.y=u.y,j.z=c.z;var M,x=_t.copy(E).add(j).multiplyByScalar(.5),P=0,I=ot(t);try{for(I.s();!(M=I.n()).done;){var k=M.value;i.copy(k);var C=vt.copy(i).subtract(x).magnitude();C>P&&(P=C);var N=vt.copy(i).subtract(w).magnitudeSquared();if(N>T){var R=Math.sqrt(N);T=(S=.5*(S+R))*S;var A=R-S;w.x=(S*w.x+A*i.x)/R,w.y=(S*w.y+A*i.y)/R,w.z=(S*w.z+A*i.z)/R}}}catch(D){I.e(D)}finally{I.f()}return S<P?(w.to(e.center),e.radius=S):(x.to(e.center),e.radius=P),e}var wt=n("gOKY"),Tt=new p.a,St=new p.a,Et=new p.a,jt=new p.a,Mt=new p.a;function xt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=wt.a.EPSILON20,i=10,r=0,a=0,s=St,o=Et;s.identity(),o.copy(t);for(var u=n*Pt(o);a<i&&Ct(o)>u;)Nt(o,jt),Mt.copy(jt).transpose(),o.multiplyRight(jt),o.multiplyLeft(Mt),s.multiplyRight(jt),++r>2&&(++a,r=0);return e.unitary=s.toTarget(e.unitary),e.diagonal=o.toTarget(e.diagonal),e}function Pt(t){for(var e=0,n=0;n<9;++n){var i=t[n];e+=i*i}return Math.sqrt(e)}var It=[1,0,0],kt=[2,2,1];function Ct(t){for(var e=0,n=0;n<3;++n){var i=t[Tt.getElementIndex(kt[n],It[n])];e+=2*i*i}return Math.sqrt(e)}function Nt(t,e){for(var n=wt.a.EPSILON15,i=0,r=1,a=0;a<3;++a){var s=Math.abs(t[Tt.getElementIndex(kt[a],It[a])]);s>i&&(r=a,i=s)}var o=It[r],u=kt[r],c=1,h=0;if(Math.abs(t[Tt.getElementIndex(u,o)])>n){var l,f=(t[Tt.getElementIndex(u,u)]-t[Tt.getElementIndex(o,o)])/2/t[Tt.getElementIndex(u,o)];h=(l=f<0?-1/(-f+Math.sqrt(1+f*f)):1/(f+Math.sqrt(1+f*f)))*(c=1/Math.sqrt(1+l*l))}return p.a.IDENTITY.to(e),e[Tt.getElementIndex(o,o)]=e[Tt.getElementIndex(u,u)]=c,e[Tt.getElementIndex(u,o)]=h,e[Tt.getElementIndex(o,u)]=-h,e}function Rt(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return At(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return At(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){o=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw a}}}}function At(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var Dt=new s.a,qt=new s.a,Vt=new s.a,zt=new s.a,Ut=new s.a,Lt=new p.a,Ft={diagonal:new p.a,unitary:new p.a};function Bt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new A;if(!t||0===t.length)return e.halfAxes=new p.a([0,0,0,0,0,0,0,0,0]),e.center=new s.a,e;var n,i=t.length,r=new s.a(0,0,0),a=Rt(t);try{for(a.s();!(n=a.n()).done;){var o=n.value;r.add(o)}}catch(z){a.e(z)}finally{a.f()}var u=1/i;r.multiplyByScalar(u);var c,h=0,l=0,f=0,d=0,m=0,v=0,y=Rt(t);try{for(y.s();!(c=y.n()).done;){var g=c.value,b=Dt.copy(g).subtract(r);h+=b.x*b.x,l+=b.x*b.y,f+=b.x*b.z,d+=b.y*b.y,m+=b.y*b.z,v+=b.z*b.z}}catch(z){y.e(z)}finally{y.f()}h*=u,l*=u,f*=u,d*=u,m*=u,v*=u;var _=Lt;_[0]=h,_[1]=l,_[2]=f,_[3]=l,_[4]=d,_[5]=m,_[6]=f,_[7]=m,_[8]=v;var O,w=xt(_,Ft),T=w.unitary,S=e.halfAxes.copy(T),E=S.getColumn(0,Vt),j=S.getColumn(1,zt),M=S.getColumn(2,Ut),x=-Number.MAX_VALUE,P=-Number.MAX_VALUE,I=-Number.MAX_VALUE,k=Number.MAX_VALUE,C=Number.MAX_VALUE,N=Number.MAX_VALUE,R=Rt(t);try{for(R.s();!(O=R.n()).done;){var D=O.value;x=Math.max(D.dot(E),x),P=Math.max(D.dot(j),P),I=Math.max(D.dot(M),I),k=Math.min(D.dot(E),k),C=Math.min(D.dot(j),C),N=Math.min(D.dot(M),N)}}catch(z){R.e(z)}finally{R.f()}E=E.multiplyByScalar(.5*(k+x)),j=j.multiplyByScalar(.5*(C+P)),M=M.multiplyByScalar(.5*(N+I)),e.center.copy(E).add(j).add(M);var q=qt.set(x-k,P-C,I-N).multiplyByScalar(.5),V=new p.a([q[0],0,0,0,q[1],0,0,0,q[2]]);return e.halfAxes.multiplyRight(V),e}},vrw9:function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var i=n("rePB"),r=n("vuIU"),a=n("Qk7e"),s=function(){function t(t){void 0===t&&(t=0),this._array=new Array(t),this._map=new Map,this._length=t}var e=t.prototype;return e.get=function(t){return Object(a.a)(t<this._array.length),this._array[t]},e.set=function(t,e){Object(a.a)(t>=0),t>=this.length&&(this.length=t+1),this._map.has(this._array[t])&&this._map.delete(this._array[t]),this._array[t]=e,this._map.set(e,t)},e.delete=function(t){var e=this._map.get(t);e>=0&&(this._array.splice(e,1),this._map.delete(t),this.length--)},e.peek=function(){return this._array[this._length-1]},e.push=function(t){if(!this._map.has(t)){var e=this.length++;this._array[e]=t,this._map.set(t,e)}},e.pop=function(){var t=this._array[--this.length];return this._map.delete(t),t},e.reserve=function(t){Object(a.a)(t>=0),t>this._array.length&&(this._array.length=t)},e.resize=function(t){Object(a.a)(t>=0),this.length=t},e.trim=function(t){null==t&&(t=this.length),this._array.length=t},e.reset=function(){this._array=[],this._map=new Map,this._length=0},e.find=function(t){return this._map.has(t)},Object(r.a)(t,[{key:"length",get:function(){return this._length},set:function(t){this._length=t,t>this._array.length&&(this._array.length=t)}},{key:"values",get:function(){return this._array}}]),t}(),o=n("FJ6+");function u(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=t[Symbol.iterator]()).next.bind(n)}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function h(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h(Object(n),!0).forEach((function(e){Object(i.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var f={loadSiblings:!1,skipLevelOfDetail:!1,maximumScreenSpaceError:2,onTraversalEnd:function(){},viewportTraversersMap:{},basePath:""},d=function(){function t(t){this.options=l(l({},f),t),this._traversalStack=new s,this._emptyTraversalStack=new s,this._frameNumber=null,this.root=null,this.selectedTiles={},this.requestedTiles={},this.emptyTiles={}}var e=t.prototype;return e.traverse=function(t,e,n){this.root=t,this.options=l(l({},this.options),n),this.reset(),this.updateTile(t,e),this._frameNumber=e.frameNumber,this.executeTraversal(t,e)},e.reset=function(){this.requestedTiles={},this.selectedTiles={},this.emptyTiles={},this._traversalStack.reset(),this._emptyTraversalStack.reset()},e.executeTraversal=function(t,e){var n=this._traversalStack;for(n.push(t);n.length>0;){var i=n.pop(),r=!1;this.canTraverse(i,e)&&(this.updateChildTiles(i,e),r=this.updateAndPushChildren(i,e,n));var a=i.parent,s=Boolean(!a||a._shouldRefine),u=!r;i.hasRenderContent?i.refine===o.e.ADD?(this.loadTile(i,e),this.selectTile(i,e)):i.refine===o.e.REPLACE&&(this.loadTile(i,e),u&&this.selectTile(i,e)):(this.emptyTiles[i.id]=i,this.loadTile(i,e),u&&this.selectTile(i,e)),this.touchTile(i,e),i._shouldRefine=r&&s}this.options.onTraversalEnd(e)},e.updateChildTiles=function(t,e){for(var n,i=u(t.children);!(n=i()).done;){var r=n.value;this.updateTile(r,e)}return!0},e.updateAndPushChildren=function(t,e,n){var i=this.options,r=i.loadSiblings,a=i.skipLevelOfDetail,s=t.children;s.sort(this.compareDistanceToCamera.bind(this));for(var c,h=!a&&t.refine===o.e.REPLACE&&t.hasRenderContent,l=!1,f=u(s);!(c=f()).done;){var d=c.value;if(d.isVisibleAndInRequestVolume?(n.find(d)&&n.delete(d),n.push(d),l=!0):(h||r)&&(this.loadTile(d,e),this.touchTile(d,e)),h){var p=void 0;if(!(p=!!d._inRequestVolume&&(d.hasRenderContent?d.contentAvailable:this.executeEmptyTraversal(d,e))))return p}}return l},e.updateTile=function(t,e){this.updateTileVisibility(t,e)},e.selectTile=function(t,e){this.shouldSelectTile(t,e)&&(t._selectedFrame=e.frameNumber,this.selectedTiles[t.id]=t)},e.loadTile=function(t,e){this.shouldLoadTile(t,e)&&(t._requestedFrame=e.frameNumber,t._priority=this.getPriority(t),this.requestedTiles[t.id]=t)},e.touchTile=function(t,e){t.tileset._cache.touch(t),t._touchedFrame=e.frameNumber},e.canTraverse=function(t,e,n,i){return void 0===n&&(n=!1),void 0===i&&(i=!1),!(!i&&!t.isVisibleAndInRequestVolume)&&(!!t.hasChildren&&(t.hasTilesetContent?!t.contentExpired:this.shouldRefine(t,e,n)))},e.shouldLoadTile=function(t,e){return t.hasUnloadedContent||t.contentExpired},e.shouldSelectTile=function(t,e){return t.contentAvailable&&!this.options.skipLevelOfDetail},e.shouldRefine=function(t,e,n){var i=t._screenSpaceError;return n&&(i=t.getScreenSpaceError(e,!0)),i>this.options.maximumScreenSpaceError},e.updateTileVisibility=function(t,e){var n=[];if(this.options.viewportTraversersMap)for(var i in this.options.viewportTraversersMap){this.options.viewportTraversersMap[i]===e.viewport.id&&n.push(i)}else n.push(e.viewport.id);t.updateVisibility(e,n)},e.compareDistanceToCamera=function(t,e){return t._distanceToCamera-e._distanceToCamera},e.getPriority=function(t){var e=this.options;switch(t.refine){case o.e.ADD:return t._distanceToCamera;case o.e.REPLACE:var n=t.parent,i=n&&(!e.skipLevelOfDetail||0===t._screenSpaceError||n.hasTilesetContent)?n._screenSpaceError:t._screenSpaceError;return this.root._screenSpaceError-i;default:return Object(a.a)(!1)}},e.anyChildrenVisible=function(t,e){for(var n,i=!1,r=u(t.children);!(n=r()).done;){var a=n.value;a.updateVisibility(e),i=i||a.isVisibleAndInRequestVolume}return i},e.executeEmptyTraversal=function(t,e){for(var n=!0,i=this._emptyTraversalStack;i.length>0;){var r=i.pop();this.updateTile(r,e),r.isVisibleAndInRequestVolume||(this.loadTile(r,e),this.touchTile(r,e));var a=!r.hasRenderContent&&this.canTraverse(r,e,!1,!0);if(a||r.contentAvailable||(n=!1),a)for(var s,o=u(r.children.filter((function(t){return t})));!(s=o()).done;){var c=s.value;i.find(c)&&i.delete(c),i.push(c)}}return n},t}()},wBSN:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var i=n("rePB"),r=n("G+eI");function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){Object(i.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var o={id:"request-scheduler",throttleRequests:!0,maxRequests:6},u=function(){function t(t){void 0===t&&(t={}),this.props=s(s({},o),t),this.requestQueue=[],this.activeRequestCount=0,this.requestMap=new Map,this.stats=new r.a({id:t.id}),this.stats.get("Queued Requests"),this.stats.get("Active Requests"),this.stats.get("Cancelled Requests"),this.stats.get("Queued Requests Ever"),this.stats.get("Active Requests Ever"),this._deferredUpdate=null}var e=t.prototype;return e.scheduleRequest=function(t,e){if(void 0===e&&(e=function(){return 0}),!this.props.throttleRequests)return Promise.resolve({done:function(){}});if(this.requestMap.has(t))return this.requestMap.get(t);var n={handle:t,priority:0,getPriority:e},i=new Promise((function(t){return n.resolve=t,n}));return this.requestQueue.push(n),this.requestMap.set(t,i),this._issueNewRequests(),i},e._issueRequest=function(t){var e=this,n=t.handle,i=t.resolve,r=!1,a=function(){r||(r=!0,e.requestMap.delete(n),e.activeRequestCount--,e._issueNewRequests())};return this.activeRequestCount++,i?i({done:a}):Promise.resolve({done:a})},e._issueNewRequests=function(){var t=this;this._deferredUpdate||(this._deferredUpdate=setTimeout((function(){return t._issueNewRequestsAsync()}),0))},e._issueNewRequestsAsync=function(){this._deferredUpdate=null;var t=Math.max(this.props.maxRequests-this.activeRequestCount,0);if(0!==t){this._updateAllRequests();for(var e=0;e<t;++e)if(this.requestQueue.length>0){var n=this.requestQueue.shift();this._issueRequest(n)}}},e._updateAllRequests=function(){for(var t=this.requestQueue,e=0;e<t.length;++e){var n=t[e];this._updateRequest(n)||(t.splice(e,1),this.requestMap.delete(n.handle),e--)}t.sort((function(t,e){return t.priority-e.priority}))},e._updateRequest=function(t){return t.priority=t.getPriority(t.handle),!(t.priority<0)||(t.resolve(null),!1)},t}()}}]);